<!DOCTYPE html>
<html>
<head>
    <title>Panel Minecraft Server</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #fff; }
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { color: #00ff88; font-size: 2.5em; margin-bottom: 10px; }
        .container { display: grid; grid-template-columns: 1fr 300px; gap: 30px; }
        .console { background: #0d1117; border: 1px solid #30363d; border-radius: 8px; padding: 20px; height: 500px; overflow-y: auto; font-family: 'Monaco', 'Courier New', monospace; font-size: 14px; line-height: 1.5; }
        .console-line { margin-bottom: 5px; }
        .timestamp { color: #8b949e; }
        .info { color: #79c0ff; }
        .success { color: #00ff88; }
        .error { color: #ff7b72; }
        .controls { display: flex; flex-direction: column; gap: 15px; }
        .btn { padding: 18px; font-size: 18px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .btn-start { background: #00cc66; color: white; }
        .btn-stop { background: #ff4444; color: white; }
        .btn-restart { background: #ffaa00; color: white; }
        .status-card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin-top: 20px; }
        .status-online { color: #00ff88; font-weight: bold; }
        .status-offline { color: #ff4444; font-weight: bold; }
        .playit-info { background: rgba(0, 100, 255, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 14px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öôÔ∏è Panel ZarzƒÖdzania Serwerem Minecraft</h1>
        <p>Serwer uruchomiony w GitHub Codespaces | Paper 1.20.4</p>
    </div>
    
    <div class="container">
        <div>
            <div class="console" id="console">
                <div class="console-line"><span class="timestamp">[00:00:00]</span> <span class="info">System:</span> Po≈ÇƒÖczono z panelem serwera</div>
                <div class="console-line"><span class="timestamp">[00:00:00]</span> <span class="info">Status:</span> <span id="statusText" class="status-offline">≈ÅƒÖczenie z API...</span></div>
            </div>
            
            <div class="status-card">
                <h3>üìä Status serwera</h3>
                <p>Wersja: <strong>Paper 1.20.4</strong></p>
                <p>Port Minecraft: <code>5718</code></p> <!-- Zmieniono z 25565 na 5718 zgodnie z TwojƒÖ konfiguracjƒÖ -->
                <p>Status: <span id="statusIndicator" class="status-offline">OFFLINE</span></p>
                <p>Gracze online: <span id="playerCount">0</span>/5</p>
                <p>API Panelu: <span id="apiStatus" class="status-offline">nieaktywne</span></p>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-start" onclick="sendCommand('start')">
                <span>‚ñ∂</span> W≈ÅƒÑCZ SERWER
            </button>
            <button class="btn btn-restart" onclick="sendCommand('restart')">
                <span>‚Üª</span> RESTARTUJ
            </button>
            <button class="btn btn-stop" onclick="sendCommand('stop')">
                <span>‚èπ</span> WY≈ÅƒÑCZ SERWER
            </button>
            
            <div class="playit-info">
                <h4>üåê Playit.gg Konfiguracja</h4>
                <p>1. W terminalu Codespace uruchom:</p>
                <code>./playit</code>
                <p>2. Autoryzuj tunel</p>
                <p>3. U≈ºyj adresu z playit.gg</p>
                <p id="playitUrl">Tunel nieaktywny</p>
            </div>
        </div>
    </div>

    <script>
        // üîß KONFIGURACJA - TUTAJ WPISZ SW√ìJ ADRES API
        // Adres Twojej us≈Çugi webowej na Render.com
        const API_BASE_URL = 'https://twoja-usluga.onrender.com'; // üëà ZASTƒÑP TYM ADRESEM

        let consoleElement = document.getElementById('console');
        
        function logToConsole(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString('pl-PL', {hour12: false});
            const line = document.createElement('div');
            line.className = 'console-line';
            line.innerHTML = `<span class="timestamp">[${timestamp}]</span> <span class="${type}">${message}</span>`;
            consoleElement.appendChild(line);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }
        
        async function sendCommand(command) {
            logToConsole(`Wysy≈Çanie komendy: ${command}`, 'info');
            
            try {
                const response = await fetch(`${API_BASE_URL}/${command}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                });
                
                // Sprawd≈∫, czy odpowied≈∫ jest OK (status 200-299)
                if (!response.ok) {
                    throw new Error(`API zwr√≥ci≈Ço b≈ÇƒÖd HTTP: ${response.status}`);
                }
                
                const data = await response.json();
                logToConsole(`Odpowied≈∫: ${data.message}`, data.success ? 'success' : 'error');
                
                if (command === 'start' || command === 'stop') {
                    setTimeout(checkServerStatus, 2000);
                }
            } catch (error) {
                logToConsole(`B≈ÇƒÖd: ${error.message}`, 'error');
                logToConsole('Sprawd≈∫ czy API jest uruchomione i adres jest poprawny', 'error');
            }
        }
        
        async function checkServerStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/status`);
                
                if (!response.ok) {
                    throw new Error(`Status API zwr√≥ci≈Ç b≈ÇƒÖd: ${response.status}`);
                }
                
                const data = await response.json();
                
                const statusIndicator = document.getElementById('statusIndicator');
                const statusText = document.getElementById('statusText');
                const playerCount = document.getElementById('playerCount');
                const apiStatus = document.getElementById('apiStatus');
                
                if (data.status === 'online') {
                    statusIndicator.textContent = 'ONLINE';
                    statusIndicator.className = 'status-online';
                    statusText.textContent = 'Serwer dzia≈Ça poprawnie';
                    statusText.className = 'status-online';
                    apiStatus.textContent = 'aktywne';
                    apiStatus.className = 'status-online';
                } else {
                    statusIndicator.textContent = 'OFFLINE';
                    statusIndicator.className = 'status-offline';
                    statusText.textContent = 'Serwer nieaktywny';
                    statusText.className = 'status-offline';
                    apiStatus.textContent = 'aktywne';
                    apiStatus.className = 'status-online';
                }
                
                playerCount.textContent = data.players || 0;
            } catch (error) {
                logToConsole('Nie mo≈ºna po≈ÇƒÖczyƒá siƒô z API panelu', 'error');
                const apiStatusEl = document.getElementById('apiStatus');
                apiStatusEl.textContent = 'b≈ÇƒÖd po≈ÇƒÖczenia';
                apiStatusEl.className = 'status-offline';
            }
        }
        
        // Inicjalizacja
        logToConsole('Panel zarzƒÖdzania za≈Çadowany', 'success');
        logToConsole(`API: ${API_BASE_URL || 'NIE SKONFIGUROWANO'}`, 'info');
        
        // Sprawdzaj status co 10 sekund
        setInterval(checkServerStatus, 10000);
        checkServerStatus();
    </script>
</body>
</html>
